#!/bin/sh
#|-*- mode:lisp -*-|#
#|
exec ros -Q -- $0 "$@"
|#
(progn ;;init forms
  (ros:ensure-asdf)
  #+quicklisp (ql:quickload '(cl-ignition) :silent t)
  )

(defpackage :ros.script.cl-ignition
  (:use :cl :cl-ignition))
(in-package :ros.script.cl-ignition)

(defun get-comment (resource-name)
  (ignitor:with-prefix (val)
  		       ((dbpedia-jp "http://ja.dbpedia.org/resource/")
  			(rdf-schema "http://www.w3.org/2000/01/rdf-schema"))
  		       ((:select (nil ?p ?o)
  			 :distinct t
  			 :subject (dbpedia-jp resource-name)
  			 :predicate (rdf-schema "#comment")))
    (caar
     (cl-ignition.query::get-single-key "O"
  					(ignitor:request-dbpedia
  					 (ignitor:convert-query val))))))

(defun main (&rest argv)
  (declare (ignorable argv))
  (cond ((string= (first argv) "comment")
	 (format t "~A~%" (get-comment (second argv))))
	(t (format t "invalid argument format"))))
;;; vim: set ft=lisp lisp:
